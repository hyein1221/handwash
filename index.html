<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>ê¹¨ë—ì† ë¶€ë£¨ë§ˆë¸” ğŸ§¼</title>
<style>
  :root {
    --line:#cddfee;
    --text:#1d2b3a;
    --p1:#79c8ff;   /* íŒŒë‘ë§ */
    --p2:#ff9ecd;   /* í•‘í¬ë§ */
    --tile-blue:#e9faff;
    --tile-red:#fff1f1;
    --tile-yellow:#fff7d9;
    --tile-green:#e8fff1;
    --tile-border-blue:#79c8ff;
    --tile-border-red:#ffb4b4;
    --tile-border-yellow:#ffd36a;
    --tile-border-green:#9fe1ad;
    --bg:#f5fbff;
  }

  body {
    font-family: "Pretendard", system-ui, -apple-system, BlinkMacSystemFont,
      "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 16px;
    gap: 12px;
  }

  h1 {
    font-size: 1.1rem;
    font-weight: 600;
    text-align: center;
    margin: 0;
    line-height:1.4;
  }
  .subtitle {
    font-size: .8rem;
    text-align:center;
    color:#4e6b86;
    line-height:1.4;
  }

  /* layout */
  .wrapper {
    display:flex;
    flex-direction:column;
    gap:16px;
    width:100%;
    max-width:900px;
  }
  @media(min-width:768px){
    .wrapper {
      flex-direction:row;
      align-items:flex-start;
    }
  }

  /* board area */
  .board-area{
    flex:1 1 auto;
    display:flex;
    justify-content:center;
  }

  /* square board */
  .board {
    width: min(80vw,480px);
    height: min(80vw,480px);
    background: radial-gradient(circle at 50% 40%, #ffffff 0%, #e9f6ff 80%);
    border: 2px solid var(--line);
    border-radius: 16px;
    box-shadow:0 20px 40px rgba(0,0,0,.05);
    position: relative;
    display:grid;
    grid-template-columns: repeat(5,1fr);
    grid-template-rows: repeat(5,1fr);
    padding:8px;
    box-sizing:border-box;
    font-size:10px;
  }

  /* tile style */
  .tile {
    position:relative;
    border:2px solid var(--line);
    border-radius:10px;
    padding:4px;
    box-sizing:border-box;
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    line-height:1.2;
    font-weight:500;
  }

  .green { background:var(--tile-green); border-color:var(--tile-border-green); color:#2f6f33; font-weight:600;}
  .blue  { background:var(--tile-blue); border-color:var(--tile-border-blue); color:#13506f; font-weight:600;}
  .red   { background:var(--tile-red); border-color:var(--tile-border-red); color:#7a1d1d; font-weight:600;}
  .yellow{ background:var(--tile-yellow); border-color:var(--tile-border-yellow); color:#6a4a00; font-weight:700;}

  /* hide center tiles (only border should be visible) */
  .inner {
    background:transparent !important;
    border:none !important;
    box-shadow:none !important;
    pointer-events:none;
  }

  /* player tokens */
  .player-token {
    position:absolute;
    width:16px;
    height:16px;
    border-radius:50%;
    border:2px solid #fff;
    box-shadow:0 4px 8px rgba(0,0,0,.2);
  }
  .p1 { background:var(--p1); }
  .p2 { background:var(--p2); }

  .tile-index {
    position:absolute;
    top:2px;
    left:4px;
    font-size:8px;
    line-height:1;
    opacity:.5;
    font-weight:600;
  }

  /* center label */
  .center-label{
    position:absolute;
    top:50%;
    left:50%;
    width:70%;
    max-width:240px;
    transform:translate(-50%,-50%);
    text-align:center;
    font-size:12px;
    line-height:1.4;
    background:#ffffffcc;
    border:2px solid var(--line);
    border-radius:12px;
    box-shadow:0 16px 32px rgba(0,0,0,.07);
    padding:12px;
  }
  .center-label-title{
    font-weight:600;
    font-size:14px;
    margin-bottom:4px;
    color:#1d2b3a;
  }
  .center-label-sub{
    font-size:10px;
    color:#4e6b86;
    line-height:1.4;
  }

  /* side panel */
  .panel {
    flex: 0 1 260px;
    background:#fff;
    border:2px solid var(--line);
    border-radius:16px;
    box-shadow:0 20px 40px rgba(0,0,0,.05);
    padding:16px;
    display:flex;
    flex-direction:column;
    gap:16px;
    font-size:12px;
    line-height:1.4;
  }

  .section-title {
    font-size:12px;
    font-weight:600;
    display:flex;
    align-items:center;
    gap:6px;
    color:#234;
  }

  .dice-row{
    display:flex;
    flex-wrap:wrap;
    align-items:center;
    gap:8px;
  }
  .value-box{
    min-width:36px;
    min-height:36px;
    border-radius:10px;
    border:2px solid var(--line);
    background:#fff;
    font-size:14px;
    font-weight:600;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  #rollBtn{
    background:#1d90ff;
    border:none;
    color:#fff;
    font-size:12px;
    font-weight:600;
    line-height:1;
    padding:10px 12px;
    border-radius:10px;
    box-shadow:0 8px 16px rgba(29,144,255,.3);
    cursor:pointer;
  }
  #rollBtn:active{
    transform:translateY(1px);
    box-shadow:0 4px 8px rgba(29,144,255,.2);
  }
  .players-status{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
  }
  .player-card{
    flex:1 1 110px;
    background:#f9f9fb;
    border:2px solid var(--line);
    border-radius:12px;
    padding:10px;
    line-height:1.4;
    min-width:110px;
  }
  .player-head{
    display:flex;
    align-items:center;
    gap:6px;
    font-weight:600;
    font-size:11px;
  }
  .dot{
    width:10px;
    height:10px;
    border-radius:50%;
    border:2px solid #fff;
    box-shadow:0 2px 4px rgba(0,0,0,.2);
  }
  .dot.p1{ background:var(--p1); }
  .dot.p2{ background:var(--p2); }

  .turn-indicator{
    font-size:11px;
    color:#4e6b86;
  }

  .message-box{
    background:#fffef5;
    border:2px solid #ffe9a9;
    border-radius:12px;
    padding:12px;
    font-size:11px;
    line-height:1.4;
    min-height:70px;
  }
  .message-title{
    font-weight:600;
    margin-bottom:4px;
    color:#6a4a00;
    font-size:11px;
  }
  .message-body{
    color:#4a3a00;
    white-space:pre-line;
  }

  .guide-box{
    background:#f6fbff;
    border:2px solid #d8eafb;
    border-radius:12px;
    padding:10px;
    font-size:11px;
    line-height:1.4;
    color:#13506f;
  }

  .footer-note{
    font-size:10px;
    color:#4e6b86;
    line-height:1.4;
  }

</style>
</head>
<body>

<h1>ê¹¨ë—ì† ë¶€ë£¨ë§ˆë¸” ğŸ§¼</h1>
<div class="subtitle">
  ë¹„ëˆ„ë¡œ 30ì´ˆ ì´ìƒ ì† ì”»ê¸°! ê°ì—¼ë³‘ì„ ë§‰ëŠ” ê°€ì¥ ì‰¬ìš´ ìŠµê´€<br/>
  2ì¸ìš© í„´ì œ ë³´ë“œê²Œì„
</div>

<div class="wrapper">

  <div class="board-area">
    <div class="board" id="board">
      <!-- íƒ€ì¼ë“¤ì€ JSë¡œ ì±„ì›€ -->
      <div class="center-label">
        <div class="center-label-title">ì„¸ê³„ ì†ì”»ê¸°ì˜ ë‚ </div>
        <div class="center-label-sub">
          ì†ë°”ë‹¥ â†’ ì†ë“± â†’ ì†ê°€ë½ ì‚¬ì´ â†’ ì†í†± ë°‘ â†’ ì—„ì§€ â†’ ì†ëª©<br/>
          íë¥´ëŠ” ë¬¼ì— ë¹„ëˆ„ë¡œ 30ì´ˆ ğŸ§¼
        </div>
      </div>
    </div>
  </div>

  <div class="panel">
    <div class="section-title">ğŸ² ì£¼ì‚¬ìœ„ & ì§„í–‰</div>

    <div class="dice-row">
      <div>í˜„ì¬ ì°¨ë¡€:</div>
      <div class="value-box" id="currentPlayerBox">P1</div>
    </div>

    <div class="dice-row">
      <div>ì£¼ì‚¬ìœ„:</div>
      <div class="value-box" id="diceResult">-</div>
      <button id="rollBtn">ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
    </div>

    <div class="players-status">
      <div class="player-card">
        <div class="player-head">
          <div class="dot p1"></div>
          <div>P1 (íŒŒë‘)</div>
        </div>
        <div class="turn-indicator">ìœ„ì¹˜: <span id="p1PosText">0</span> ì¹¸</div>
      </div>

      <div class="player-card">
        <div class="player-head">
          <div class="dot p2"></div>
          <div>P2 (í•‘í¬)</div>
        </div>
        <div class="turn-indicator">ìœ„ì¹˜: <span id="p2PosText">0</span> ì¹¸</div>
      </div>
    </div>

    <div class="section-title">ğŸ“¢ ì´ë²ˆ ì¹¸ ë¯¸ì…˜</div>
    <div class="message-box">
      <div class="message-title" id="messageTitle">ê²Œì„ ì„¤ëª…</div>
      <div class="message-body" id="messageBody">
        ì£¼ì‚¬ìœ„ë¥¼ ëˆŒëŸ¬ ì´ë™í•´ìš”.
        ë¨¼ì € GOAL ë„ì°©í•œ ì‚¬ëŒì´ ìŠ¹ë¦¬!
      </div>
    </div>

    <div class="guide-box">
      ì–¸ì œ ì†ì„ ì”»ì„ê¹Œìš”?<br/>
      ğŸ½ ì‹ì‚¬Â·ê°„ì‹ ì „<br/>
      ğŸš½ í™”ì¥ì‹¤ ë‹¤ë…€ì˜¨ í›„<br/>
      ğŸ¤§ ê¸°ì¹¨/ì½§ë¬¼ ë‹¦ì€ í›„<br/>
      ğŸ› ë°”ê¹¥ë†€ì´ í›„<br/>
      ğŸ¶ ë™ë¬¼ ë§Œì§„ í›„
    </div>

    <div class="footer-note">
      íë¥´ëŠ” ë¬¼ì— ë¹„ëˆ„ë¡œ 30ì´ˆ ë™ì•ˆ<br/>
      ì†ë°”ë‹¥ â†’ ì†ë“± â†’ ì†ê°€ë½ ì‚¬ì´ â†’ ì†í†± ë°‘ â†’ ì—„ì§€ â†’ ì†ëª©ê¹Œì§€ ê¹¨ë—í•˜ê²Œ âœ¨
    </div>
  </div>

</div>

<script>
/*
ë³´ë“œë¥¼ ë¶€ë£¨ë§ˆë¸” í˜•íƒœë¡œ ëŒë¦¬ëŠ” ìˆœì„œ(0~23ê¹Œì§€ ì´ 24ì¹¸ ì˜ˆì‹œ).
ìš°ë¦¬ëŠ” 5x5 ê²©ìì—ì„œ í…Œë‘ë¦¬ë§Œ ì‚¬ìš©.
ì¸ë±ìŠ¤ ë°°ì¹˜ëŠ” ì‹œê³„ë°©í–¥ìœ¼ë¡œ:
top row (ì™¼->ì˜¤) : 0,1,2,3,4
right col (ìœ„->ì•„ë˜, ì¤‘ë³µ ì œì™¸) : 5,6,7,8
bottom row (ì˜¤->ì™¼, ì¤‘ë³µ ì œì™¸): 9,10,11,12,13
left col (ì•„ë˜->ìœ„, ì¤‘ë³µ ì œì™¸): 14,15,16,17
ê·¸ë¦¬ê³  ë‚¨ì€ ëª¨ì„œë¦¬ ì•ˆìª½ í•œ ì¤„(ìš°ë¦¬ê°€ 24ì¹¸ ë§ì¶”ë ¤ê³  ì‚¬ê°í˜• ì•ˆìª½ í…Œë‘ë¦¬ ë‘˜): 18,19,20,21,22,23
=> ì´ê±´ ì‹¤ì œë¡œëŠ” ì¢€ ë¹¡ì„¸ì„œ, ì—¬ê¸°ì„œëŠ” "24ì¹¸ ë§"ì„ í•˜ë“œì½”ë”© ë°°ì¹˜í• ê²Œ.
*/

const pathOrder = [
  // ë°”ê¹¥ í…Œë‘ë¦¬ ì‹œê³„ë°©í–¥ 16ì¹¸ + ì•ˆìª½ 8ì¹¸ í•´ì„œ 24ì¹¸
  // ì‹¤ì œë¡œëŠ” 5x5 ê¸°ì¤€ ë°”ê¹¥ 16ì¹¸ + ì•ˆìª½ 8ì¹¸(3x3 í…Œë‘ë¦¬)
  0,1,2,3,4, 9,14,19,24,23,22,21,20,15,10,5, 6,7,8,13,18,17,16,11
];
// ìœ„ pathOrderëŠ” "ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ëˆë‹¤"ëŠ” ì»¨ì…‰ìœ¼ë¡œ
// 5x5 => ì¸ë±ìŠ¤ëŠ” row*5+col ë¡œ ì·¨ê¸‰í•  ê±°ë¼ì„œ
// 0= (0,0), 1=(0,1), ..., 24=(4,4)
// pathOrder ê¸¸ì´:
const PATH_LEN = pathOrder.length; // 24ì¹¸

// ê° ì¹¸(=êµìœ¡ ë©”ì‹œì§€) ì •ì˜
// indexëŠ” path ìƒì˜ 0~23ë²ˆì§¸ì¹¸ì— í•´ë‹¹í•˜ëŠ” "ê²Œì„ ìˆœë²ˆ"
const tilesData = [
  // 0 START
  {color:"green", title:"START", desc:"ê¹¨ë—ì† ëŒ€ëª¨í—˜ ì‹œì‘!\në¹„ëˆ„ë¡œ 30ì´ˆ ì¤€ë¹„ëë‚˜ìš”?", move:0},
  {color:"blue",  title:"ë†€ì´í„° ë‹¤ë…€ì™”ì–´ìš”", desc:"ë°”ê¹¥ë†€ì´ í›„ì—” ì†ì”»ê¸°!", move:0},
  {color:"red",   title:"ë¹„ëˆ„ê°€ ì—†ì–´ìš” ğŸ˜±", desc:"ë¹„ëˆ„ ì—†ì´ ë¬¼ë§Œ? ì•ˆë¼ìš”!\n1ì¹¸ ë’¤ë¡œ ê°€ìš”.", move:-1},
  {color:"blue",  title:"ì†ê°€ë½ ì‚¬ì´ ë¬¸ì§ˆë¬¸ì§ˆ", desc:"ê±°í’ˆìœ¼ë¡œ ì‚¬ì´ì‚¬ì´ ê¹¨ë—!", move:0},
  {color:"blue",  title:"ì‹ì‚¬ ì „", desc:"ë°¥ ë¨¹ê¸° ì „ ì†ì”»ê¸° ì•½ì†!", move:0},

  {color:"blue",  title:"ê¸°ì¹¨ í–ˆì–´ìš” ğŸ¤§", desc:"ê¸°ì¹¨ í›„ì—” ë¹„ëˆ„ë¡œ ì†ì”»ê¸°!", move:0},
  {color:"blue",  title:"ì†í†± ë°‘ê¹Œì§€ ì“±ì“±", desc:"ìˆ¨ì€ ì„¸ê·  ì•ˆë…•~", move:0},
  {color:"red",   title:"ëˆˆ ë¹„ë³ì–´ìš”", desc:"ê¹¨ë—í•˜ì§€ ì•Šì€ ì†ì€ ëˆˆê¸ˆì§€!\n1ì¹¸ ë’¤ë¡œ ê°€ìš”.", move:-1},
  {color:"blue",  title:"ë™ë¬¼ ë§Œì¡Œì–´ìš” ğŸ¶", desc:"ê°•ì•„ì§€ ë§Œì§€ê³  ì†ì”»ê¸°!", move:0},

  {color:"blue",  title:"ì—„ì§€ ëŒë ¤ë¹¨ë˜ ğŸ‘", desc:"ì—„ì§€ë„ ë¹™ê¸€ë¹™ê¸€ ê¹¨ë—!", move:+1},
  {color:"blue",  title:"í™”ì¥ì‹¤ ë‹¤ë…€ì˜¨ í›„ ğŸš½", desc:"ë¹„ëˆ„ë¡œ 30ì´ˆ!", move:0},
  {color:"blue",  title:"ì¹œêµ¬ë‘ ì†ì¡ì•˜ì–´ìš”", desc:"í•¨ê»˜ ë†€ê³  ì†ì”»ê¸° ìŠì§€ ì•Šê¸°", move:0},
  {color:"red",   title:"ëª°ë˜ ëŒ€ì¶© í—¹êµ¬ê¸°", desc:"ë¬¼ ì ê¹ì€ ë¶€ì¡±í•´ìš”.\n1ì¹¸ ë’¤ë¡œ.", move:-1},
  {color:"blue",  title:"ì†ëª©ê¹Œì§€ ê¹¨ë—í•˜ê²Œ", desc:"ì†ëª©ê¹Œì§€ ì‹¹ì‹¹! ìµœê³ ì˜ˆìš” âœ¨", move:0},
  {color:"blue",  title:"ê°„ì‹ ì‹œê°„ ğŸ", desc:"ê¹¨ë—í•œ ì† = ë” ë§›ìˆëŠ” ê°„ì‹", move:0},
  {color:"blue",  title:"ì½§ë¬¼ ë‹¦ì•˜ì–´ìš”", desc:"íœ´ì§€ ë²„ë¦¬ê³  ì†ì”»ê¸°ê¹Œì§€ í•´ì•¼ ë!", move:0},

  {color:"blue",  title:"ì½”ë¥¼ ë‹¦ì•˜ì–´ìš”", desc:"ì†ë„ ê°™ì´ ì”»ê¸°!", move:0},
  {color:"yellow",title:"30ì´ˆ ì„±ê³µ!", desc:"íƒ€ì´ë¨¸ ëê¹Œì§€ ê¸°ë‹¤ë ¸ì–´ìš”!\nì•ìœ¼ë¡œ 2ì¹¸ ì´ë™!", move:+2},
  {color:"blue",  title:"ëª¨ë˜ë†€ì´ í–ˆì–´ìš”", desc:"ëˆˆ ë¹„ë¹„ê¸° ì „ì— ì†ì”»ê¸°!", move:0},
  {color:"red",   title:"ì†ì„ ì…ì— ë„£ì—ˆì–´ìš”", desc:"ì„¸ê· ì´ ëª¸ì†ìœ¼ë¡œ ë“¤ì–´ê°ˆ ìˆ˜ë„â€¦\n1ì¹¸ ë’¤ë¡œ.", move:-1},
  {color:"blue",  title:"ê±°í’ˆìœ¼ë¡œ ì„¸ê·  OUT", desc:"ì„¸ê·  ë„ë§ê°€ìš”!\nì•ìœ¼ë¡œ 1ì¹¸!", move:+1},
  {color:"blue",  title:"ìˆ˜ê±´ìœ¼ë¡œ ê¾¹ê¾¹ ë‹¦ê¸°", desc:"ì¼íšŒìš© íƒ€ì›”ì´ë‚˜ ê°œì¸ ìˆ˜ê±´ ì‚¬ìš©í•´ìš”", move:0},
  {color:"blue",  title:"ì¹œêµ¬ì—ê²Œ ì•Œë ¤ì¤¬ì–´ìš”", desc:"â€œë†€ì´ ëë‚˜ë©´ ì†ì”»ê¸°!â€ ë©‹ì§„ ì•ˆë‚´ì ğŸ¥‡", move:0},
  {color:"yellow",title:"GOAL ğŸ‰", desc:"ê¹¨ë—ì† ì±”í”¼ì–¸!\në¹„ëˆ„ë¡œ 30ì´ˆ ì†ì”»ê¸° ìŠµê´€ ì™„ì„±!", move:0}
];
// tilesData.length === 24 ì´ì–´ì•¼ í•œë‹¤
// pathOrder.length === 24 ì´ì–´ì•¼ í•œë‹¤
// ë§ˆì§€ë§‰ ì¹¸(23)ì´ GOAL

/* ---------------------------
   ë³´ë“œ DOM ë§Œë“¤ê¸° (5x5 grid)
----------------------------*/
const boardEl = document.getElementById("board");

// 25ì¹¸(5x5) ê·¸ë¦¬ë˜, ê¸°ë³¸ì€ inner(ë¹„í™œì„±). ì´í›„ pathOrderì— í•´ë‹¹í•˜ëŠ” ì¹¸ë§Œ tile ìŠ¤íƒ€ì¼ ì ìš©
for(let cell=0; cell<25; cell++){
  const div = document.createElement("div");
  div.classList.add("tile","inner");
  div.dataset.cellIndex = cell; // 0~24 grid index
  boardEl.appendChild(div);
}

// pathOrderë¥¼ ëŒë©´ì„œ ì‹¤ì œ ì¹¸ ì •ë³´ ë¶™ì´ê¸°
for(let pathIdx=0; pathIdx<PATH_LEN; pathIdx++){
  const gridIndex = pathOrder[pathIdx]; // 0~24 ì¤‘ í•˜ë‚˜
  const tileInfo = tilesData[pathIdx];

  const cellEl = boardEl.querySelector(`[data-cell-index="${gridIndex}"]`);
  cellEl.classList.remove("inner");
  cellEl.classList.add(tileInfo.color);

  // index badge
  const idxDiv = document.createElement("div");
  idxDiv.classList.add("tile-index");
  idxDiv.textContent = pathIdx; // ê²Œì„ ìˆœë²ˆ
  cellEl.appendChild(idxDiv);

  // label
  const labelDiv = document.createElement("div");
  labelDiv.innerHTML = `
    <div>${tileInfo.title}</div>
  `;
  cellEl.appendChild(labelDiv);
}

/* ---------------------------
   ê²Œì„ ìƒíƒœ
----------------------------*/
let currentPlayer = 1; // 1 or 2
let positions = {1:0, 2:0}; // path ìƒ ìœ„ì¹˜ (0~23)
let gameOver = false;

/* UI elems */
const diceBox = document.getElementById("diceResult");
const rollBtn = document.getElementById("rollBtn");
const messageTitle = document.getElementById("messageTitle");
const messageBody = document.getElementById("messageBody");
const p1PosText = document.getElementById("p1PosText");
const p2PosText = document.getElementById("p2PosText");
const currentPlayerBox = document.getElementById("currentPlayerBox");

/* í”Œë ˆì´ì–´ í† í° ë Œë” */
function renderPlayers(){
  // ê¸°ì¡´ í† í° ì‚­ì œ
  document.querySelectorAll(".player-token").forEach(el=>el.remove());

  [1,2].forEach(p=>{
    const pos = positions[p]; // path index
    const gridIndex = pathOrder[pos]; // grid index (0~24)
    const tileEl = boardEl.querySelector(`[data-cell-index="${gridIndex}"]`);
    if(!tileEl) return;
    const token = document.createElement("div");
    token.classList.add("player-token", p===1?"p1":"p2");
    // ë‘ ëª… ê²¹ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ ì‚´ì§ ìœ„ì¹˜ ë‚˜ëˆ„ì
    if(p===1){
      token.style.bottom="4px";
      token.style.left="4px";
    }else{
      token.style.bottom="4px";
      token.style.right="4px";
    }
    tileEl.appendChild(token);
  });

  p1PosText.textContent = positions[1];
  p2PosText.textContent = positions[2];
  currentPlayerBox.textContent = currentPlayer===1?"P1":"P2";
}

/* íƒ€ì¼ ë©”ì‹œì§€ í‘œì‹œ */
function showTileMessage(pathPos){
  const tileInfo = tilesData[pathPos];
  messageTitle.textContent = tileInfo.title;
  messageBody.textContent = tileInfo.desc;
}

/* ì´ë™ ì²˜ë¦¬ */
function movePlayer(steps){
  if(gameOver) return;

  const p = currentPlayer;
  let newPos = positions[p] + steps;
  if(newPos >= PATH_LEN-1) {
    // ë„ì°© í˜¹ì€ ë„˜ê¹€ -> GOAL
    newPos = PATH_LEN-1;
  }
  positions[p] = newPos;

  // í˜„ì¬ ì¹¸ ë©”ì‹œì§€
  showTileMessage(newPos);

  // ì¹¸ íš¨ê³¼(move)
  const effect = tilesData[newPos].move || 0;
  if(effect !== 0 && !gameOver){
    let after = positions[p] + effect;
    if(after < 0) after = 0;
    if(after >= PATH_LEN-1) after = PATH_LEN-1;
    positions[p] = after;
    // íš¨ê³¼ ì ìš© í›„ ë©”ì‹œì§€ ë‹¤ì‹œ ê°±ì‹ 
    showTileMessage(after);
  }

  renderPlayers();

  // GOAL ì²´í¬
  if(positions[p] === PATH_LEN-1){
    gameOver = true;
    messageTitle.textContent = "ìŠ¹ë¦¬ ğŸ‰";
    messageBody.textContent = (p===1 ? "P1" : "P2") +
      " ê¹¨ë—ì† ì±”í”¼ì–¸!\në¹„ëˆ„ë¡œ 30ì´ˆ ì†ì”»ê¸° ìŠµê´€ ì™„ì„±!";
    return;
  }

  // í„´ êµì²´
  currentPlayer = (currentPlayer===1)?2:1;
  renderPlayers();
}

/* ì£¼ì‚¬ìœ„ ì´ë²¤íŠ¸ */
rollBtn.addEventListener("click", ()=>{
  if(gameOver) return;
  const roll = Math.floor(Math.random()*6)+1; //1~6
  diceBox.textContent = roll;
  movePlayer(roll);
});

/* ì´ˆê¸° ë Œë” */
renderPlayers();
showTileMessage(0);
</script>
</body>
</html>
